{
  "name": "erke_giftbot",
  "version": "1.0.0",
  "main": "index.js",
  "scripts": {
    "start": "node index.js"
  },
  "dependencies": {
    "axios": "^0.21.1",
    "express": "^4.17.1"
  }
}
const express = require('express');
const axios = require('axios');
const app = express();

const TOKEN = process.env.BOT_TOKEN;
const TELEGRAM_API = `https://api.telegram.org/bot${TOKEN}`;

app.use(express.json());

app.post('/webhook', async (req, res) => {
  const msg = req.body.message;
  const text = msg?.text;
  const chatId = msg?.chat?.id;

  if (!text || !chatId) return res.sendStatus(200);

  if (text === '/start kontent') {
    await axios.post(`${TELEGRAM_API}/sendDocument`, {
      chat_id: chatId,
      document: 'BQACAgIAAxkBAAE1YCFoMkGD1RKZOm73creEt6dkhUih5QAChmwAAvR1kUkqK0mYJRbuNDYE',
      caption: 'Вот гайд “Контент, который продаёт” – выкладывай и взаимодействуй с аудиторией эффективно.'
    });
  } else if (text === '/start smysl') {
    await axios.post(`${TELEGRAM_API}/sendDocument`, {
      chat_id: chatId,
      document: 'BQACAgIAAxkBAAE1YCVoMkGy0Z0HkvjC2q86UQ0Lm0CtLgACh2wAAvR1kUlf1WfrOPCOOjYE',
      caption: 'Вот гайд “10 смыслов клиентки”. Это тот самый материал из рекламы – выкладывай контент, который реально трогает.'
    });
  }

  res.sendStatus(200);
});

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`Bot is running on port ${PORT}`);
});
